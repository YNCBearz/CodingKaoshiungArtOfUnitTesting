###### tags: `單元測試的藝術`
# Chapter 9 在組織中導入單元測試
## 9.2 成功之道

隨著組織的變革，你需要學會讓管理者相信，你的成就也是就是他們的成就。

### 9.2.1 游擊式的進行(由下而上)
游擊式的進行方式，指的是從一個團隊開始進行變革，得到成果，然後才說服其他人這樣的改變是值得的，這通常是一個厭倦墨守成規的團隊，決定改變，自學推動改變。
有些時候則是開發者直接採納試行這樣的變革，然後管理者才改變。另外一種就是先提出需求給管理端，管理者也同意並支持，改變可以低調的進行但這個是不得已中的辦法，

### 9.2.2 說服高層（由上而下）

由經理或是開發人員來啟動這流程，讓組織中其他人逐漸加入，或是另外一個中階主管看了書，這個經理可能會把這個想法介紹給其他團隊開始進行，或是借助自己的權利直接進行變革。

### 9.2.3 引入外援

強烈建議請組織外的專家來幫助導入變革。

**言論自由**: 可以說出不方便說的話

**經驗**: 知道如何處理公司內部的阻礙，也知道那個推動關鍵點

**專職時間**: 他專門負責推動這件事情。

    程式碼完整性:在程式碼穩定性、可維護性及回饋的目的，主要是指程式碼已經完成所需的功能，並在程式碼出現問題時，團隊可以及時發現。

    - 自動化建置
    - 持續整合
    - 單元測試和測試驅動開發
    - 程式碼穩定性及有共識的品質標準
    - 以最短的時間修復ＢＵＧ（或是讓失敗的測試通過）

導入失敗的原因很多時候是因為，沒有足夠的時間投入變革的過程。

### 9.2.4 讓進度可見

始終要保持變革的進度與狀態的可見，你可以用任何方式把一些圖表或是關係的資訊表示出來，可以向兩個族群傳遞資訊：
- 正在變進行變革的族群： 透過這些圖表，他們也能了解到與其他人的差異，激發競爭心
- 組織中未參與這個過程的族群： 你會激發其他人的好奇心

### 9.2.5 設定具體目標

- 提高測試程式碼的護概率，同時也要進行程式和測試審查 

研究顯示，如果開發人員撰寫測試，卻不使用程式碼覆蓋率工具，或是其他工具對覆蓋率做衡量，往往會高估測試的覆蓋率，可能只有50~60%，
簡單的目標是程式碼覆蓋率越高越好，能發現BUG的可能性越高。
但是這只是最簡單的部分，仍需要對程式碼及測試做審查，才可以算是真正有意義的測試。

- 提高測試程式覆蓋率與程式碼改動的比率
  
    修改的程式碼越多，可能導致的ＢＵＧ越多，可以用軟體去分析異動的程式碼行數。
- 減少重複的bug 

    修復一個ＢＵＧ很容易搞壞的原本的功能，如果ＢＵＧ不會經常重複出現，說明你能夠在不破壞原有功能的下，修復ＢＵＧ及維護系統。

- 降低修復bug 的平均時間

    如果一個系統有良好的測試和覆蓋率，BUG 通常可以很快得到修復。



**Code Complete 測試過程的度量指標**
- 不同優先等級的類別期平均ＢＵＧ數
- 針對發現的Bug所需的測試平均時間
- 透過測試案例所發現的bug 平均數量


### 9.2.6應對阻礙
導入變革中，阻礙總是難免，如果是技術性的，只要能找到解決方式就能很快解決，但是組織上的阻礙，要更謹慎小心，用心理學上的方法解決。
碰到了挫折不要有暫時式的失落感，改革需要時間。所以改革如果有得到管理者的承諾時，在變革中遇到的巨大壓力會比較小，也不用在此時說服其他人。


## 9.3 失敗的原因

### 9.3.1 缺乏驅動力
失敗得變革個過程中，缺乏驅動是是最主要的關鍵因素。要持續地推動變革不容易，需要抽出時間培訓別人，解決他們的問題，還要應付政治鬥爭。

### 9.3.2 缺乏政策支持
如果你的老闆跟你說不要變革，你就沒辦法，如果他沒有給你足夠的資源進行變革，你也會因為缺乏資源而失敗。

### 9.3.3 糟糕的實現和第一印象

如果你還不知道怎麼撰寫良好的單元測試，就計劃在組織中推動變革，你還是找個有經驗的人一起，或是遵循最佳實踐。
如果在開始階段得實踐效果不佳，人們就會對你失去信心，導致先驅專案失敗。

### 9.3.4 缺乏團隊支持
如果沒有得到團隊的支持，你的變革幾乎不會成功，因為你很難把新流程所需的額外工作和你的日常工作結合再一起。
無論你做什麼事情，都不要把團隊對你的支持當成理所當然，你要知道後果。
